<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Reviewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
            background: linear-gradient(135deg, #0f3460 0%, #e94560 100%);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.3);
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .upload-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px dashed #4a5568;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .upload-section:hover {
            border-color: #e94560;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(233, 69, 96, 0.2);
        }

        .upload-area {
            text-align: center;
            padding: 40px;
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #e94560;
        }

        .file-input {
            display: none;
        }

        .upload-btn {
            background: linear-gradient(135deg, #e94560, #f27121);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(233, 69, 96, 0.4);
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.6);
        }

        .job-description {
            margin-bottom: 30px;
        }

        .job-description h3 {
            color: #e94560;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .job-description textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid #4a5568;
            border-radius: 10px;
            padding: 20px;
            color: #e0e0e0;
            font-size: 1rem;
            min-height: 120px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .job-description textarea:focus {
            outline: none;
            border-color: #e94560;
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.3);
        }

        .analyze-btn {
            background: linear-gradient(135deg, #0f3460, #16213e);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(15, 52, 96, 0.4);
            display: block;
            margin: 30px auto;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(15, 52, 96, 0.6);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: #e94560;
        }

        .spinner {
            border: 3px solid rgba(233, 69, 96, 0.3);
            border-top: 3px solid #e94560;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-section {
            display: none;
            margin-top: 30px;
        }

        .scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .score-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            border-left: 4px solid #e94560;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .score-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .score-card h3 {
            color: #e94560;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .score-display {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #e94560;
        }

        .progress-bar {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e94560, #f27121);
            transition: width 0.8s ease;
        }

        .result-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #e94560;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .result-card h3 {
            color: #e94560;
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .analysis-content {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
        }

        .improvement-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 3px solid #f27121;
        }

        .improvement-item h4 {
            color: #f27121;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .improvement-item p {
            color: #c0c0c0;
            font-size: 0.95rem;
        }

        .strength-item {
            background: rgba(34, 197, 94, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border-left: 3px solid #22c55e;
        }

        .strength-item h4 {
            color: #22c55e;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .strength-item p {
            color: #c0c0c0;
            font-size: 0.95rem;
        }

        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: #86efac;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .file-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .file-info h4 {
            color: #e94560;
            margin-bottom: 10px;
        }

        .ats-keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .keyword {
            background: rgba(233, 69, 96, 0.2);
            color: #e94560;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            border: 1px solid rgba(233, 69, 96, 0.3);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .scores-grid {
                grid-template-columns: 1fr;
            }

            .score-display {
                flex-direction: column;
                text-align: center;
            }

            .progress-bar {
                margin: 15px 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI Resume Reviewer</h1>
            <p>Get professional AI-powered feedback with ATS scoring and detailed improvement recommendations</p>
        </div>

        <div class="upload-section">
            <div class="upload-area">
                <div class="upload-icon">üìÑ</div>
                <h3>Upload Your Resume</h3>
                <p>Support for PDF, DOC, DOCX, and TXT files</p>
                <input type="file" id="fileInput" class="file-input" accept=".pdf,.doc,.docx,.txt">
                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                    Choose File
                </button>
            </div>
            <div class="file-info" id="fileInfo">
                <h4>Selected File:</h4>
                <p id="fileName"></p>
            </div>
        </div>

        <div class="job-description">
            <h3>üìã Job Description (Optional but Recommended)</h3>
            <textarea id="jobDescription" placeholder="Paste the job description here to get targeted feedback and ATS scoring based on specific requirements..."></textarea>
        </div>

        <button class="analyze-btn" id="analyzeBtn" onclick="analyzeResume()">
            üîç Analyze Resume with AI
        </button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>AI is analyzing your resume... This may take a moment.</p>
        </div>

        <div class="results-section" id="results">
            <div class="scores-grid">
                <div class="score-card">
                    <h3>üìä Overall Score</h3>
                    <div class="score-display">
                        <span class="score-value" id="overallScore">--</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="overallProgress"></div>
                        </div>
                        <span style="font-size: 1.1rem;">/ 100</span>
                    </div>
                    <p style="opacity: 0.8;">General resume quality and effectiveness</p>
                </div>

                <div class="score-card">
                    <h3>üéØ ATS Score</h3>
                    <div class="score-display">
                        <span class="score-value" id="atsScore">--</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="atsProgress"></div>
                        </div>
                        <span style="font-size: 1.1rem;">/ 100</span>
                    </div>
                    <p style="opacity: 0.8;">Applicant Tracking System compatibility</p>
                </div>

                <div class="score-card">
                    <h3>üîÑ Job Match Score</h3>
                    <div class="score-display">
                        <span class="score-value" id="matchScore">--</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="matchProgress"></div>
                        </div>
                        <span style="font-size: 1.1rem;">/ 100</span>
                    </div>
                    <p style="opacity: 0.8;">Alignment with job requirements</p>
                </div>
            </div>

            <div class="result-card">
                <h3>‚ú® Key Strengths</h3>
                <div class="analysis-content" id="strengths"></div>
            </div>

            <div class="result-card">
                <h3>üîß Priority Improvements</h3>
                <div class="analysis-content" id="improvements"></div>
            </div>

            <div class="result-card">
                <h3>ü§ñ ATS Analysis</h3>
                <div class="analysis-content" id="atsAnalysis"></div>
            </div>

            <div class="result-card">
                <h3>üìà Recommendations</h3>
                <div class="analysis-content" id="recommendations"></div>
            </div>
        </div>
    </div>

    <!-- Backend Server Code (Save as server.js) -->
    <script type="text/plain" id="backend-code">
const express = require('express');
const multer = require('multer');
const cors = require('cors');
const fs = require('fs');
const path = require('path');
require('dotenv').config();

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors());
app.use(express.json());
app.use(express.static('public'));

// Configure multer for file uploads
const upload = multer({ 
    dest: 'uploads/',
    limits: { fileSize: 5 * 1024 * 1024 } // 5MB limit
});

// Gemini AI API call function
async function callGeminiAPI(prompt) {
    const apiKey = process.env.GEMINI_API_KEY;
    
    if (!apiKey) {
        throw new Error('GEMINI_API_KEY not found in environment variables');
    }

    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${apiKey}`;
    
    const requestBody = {
        contents: [{
            parts: [{
                text: prompt
            }]
        }],
        generationConfig: {
            temperature: 0.7,
            topK: 40,
            topP: 0.95,
            maxOutputTokens: 4096
        }
    };

    const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(requestBody)
    });

    if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error?.message || 'API request failed');
    }

    const data = await response.json();
    
    if (!data.candidates || !data.candidates[0] || !data.candidates[0].content) {
        throw new Error('No response generated');
    }

    return data.candidates[0].content.parts[0].text;
}

// Resume analysis endpoint
app.post('/api/analyze-resume', upload.single('resume'), async (req, res) => {
    try {
        if (!req.file) {
            return res.status(400).json({ error: 'No resume file uploaded' });
        }

        const jobDescription = req.body.jobDescription || '';
        
        // Read file content
        const filePath = req.file.path;
        const fileContent = fs.readFileSync(filePath, 'utf8');
        
        // Clean up uploaded file
        fs.unlinkSync(filePath);

        // Prepare comprehensive prompt
        let prompt = `
        You are a professional resume reviewer, ATS expert, and career coach. Analyze the following resume comprehensively.

        RESUME CONTENT:
        ${fileContent}
        `;

        if (jobDescription) {
            prompt += `
            
            JOB DESCRIPTION:
            ${jobDescription}
            `;
        }

        prompt += `
        
        Please provide a detailed analysis in the following JSON format:
        {
            "overallScore": 85,
            "atsScore": 78,
            "jobMatchScore": 82,
            "strengths": [
                {
                    "title": "Strong Technical Skills",
                    "description": "Well-documented programming languages and frameworks with specific versions and proficiency levels."
                },
                {
                    "title": "Quantified Achievements",
                    "description": "Includes specific metrics like '30% performance improvement' and '50+ successful projects delivered'."
                }
            ],
            "improvements": [
                {
                    "title": "Add Professional Summary",
                    "description": "Include a 2-3 line professional summary at the top highlighting your key value proposition.",
                    "priority": "High",
                    "impact": "Improves recruiter engagement by 40%"
                },
                {
                    "title": "Optimize Keywords",
                    "description": "Include more industry-specific keywords to improve ATS scoring.",
                    "priority": "High",
                    "impact": "Increases ATS pass rate by 25%"
                }
            ],
            "atsAnalysis": {
                "formatting": "Good - Clean structure with clear sections",
                "keywords": "Moderate - Missing some key industry terms",
                "sections": "Standard sections present (Experience, Education, Skills)",
                "readability": "Excellent - Easy to parse for ATS systems",
                "recommendations": [
                    "Add more relevant keywords naturally throughout the content",
                    "Ensure consistent date formatting (MM/YYYY)",
                    "Use standard section headers"
                ]
            },
            "recommendations": [
                {
                    "category": "Content",
                    "suggestion": "Add 2-3 more quantified achievements in each role"
                },
                {
                    "category": "Format",
                    "suggestion": "Consider using bullet points for better readability"
                }
            ]
        }

        Important guidelines:
        1. Be specific and actionable in all feedback
        2. Provide realistic scores (60-95 range typically)
        3. Focus on both content and ATS optimization
        4. Give priority levels for improvements (High, Medium, Low)
        5. Include impact estimates where possible
        6. Consider industry standards and best practices
        7. If job description is provided, focus heavily on job matching
        `;

        const response = await callGeminiAPI(prompt);
        
        // Parse the JSON response
        const jsonMatch = response.match(/\{[\s\S]*\}/);
        if (!jsonMatch) {
            throw new Error('Invalid response format from AI');
        }

        const analysis = JSON.parse(jsonMatch[0]);
        res.json(analysis);

    } catch (error) {
        console.error('Error analyzing resume:', error);
        res.status(500).json({ 
            error: error.message || 'Failed to analyze resume' 
        });
    }
});

// Health check endpoint
app.get('/api/health', (req, res) => {
    res.json({ status: 'OK', message: 'Resume Reviewer API is running' });
});

app.listen(PORT, () => {
    console.log(`Server running on port ${PORT}`);
    console.log('Make sure to set GEMINI_API_KEY in your .env file');
});
    </script>

    <!-- Package.json -->
    <script type="text/plain" id="package-json">
{
  "name": "ai-resume-reviewer",
  "version": "1.0.0",
  "description": "AI-powered resume reviewer with ATS scoring",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "multer": "^1.4.5-lts.1",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}
    </script>

    <!-- Environment file template -->
    <script type="text/plain" id="env-template">
# Add your Gemini API key here
GEMINI_API_KEY=your_gemini_api_key_here
PORT=3000
    </script>

    <script>
        let selectedFile = null;
        const API_BASE_URL = 'http://localhost:3000/api';

        // Handle file selection
        document.getElementById('fileInput').addEventListener('change', function(e) {
            selectedFile = e.target.files[0];
            if (selectedFile) {
                document.getElementById('fileInfo').style.display = 'block';
                document.getElementById('fileName').textContent = selectedFile.name;
                showMessage('File selected successfully! Ready for analysis.', 'success');
            }
        });

        function showMessage(message, type) {
            const existingMessages = document.querySelectorAll('.error, .success');
            existingMessages.forEach(msg => msg.remove());

            const messageDiv = document.createElement('div');
            messageDiv.className = type;
            messageDiv.textContent = message;
            
            const container = document.querySelector('.container');
            container.insertBefore(messageDiv, document.getElementById('results'));
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        async function analyzeResume() {
            if (!selectedFile) {
                showMessage('Please select a resume file first.', 'error');
                return;
            }

            const jobDescription = document.getElementById('jobDescription').value.trim();

            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('results').style.display = 'none';

            try {
                const formData = new FormData();
                formData.append('resume', selectedFile);
                if (jobDescription) {
                    formData.append('jobDescription', jobDescription);
                }

                const response = await fetch(`${API_BASE_URL}/analyze-resume`, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Analysis failed');
                }

                const analysis = await response.json();
                displayResults(analysis);
                
            } catch (error) {
                console.error('Error analyzing resume:', error);
                showMessage('Error analyzing resume: ' + error.message, 'error');
            } finally {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('analyzeBtn').disabled = false;
            }
        }

        function displayResults(analysis) {
            // Update scores
            updateScore('overallScore', 'overallProgress', analysis.overallScore);
            updateScore('atsScore', 'atsProgress', analysis.atsScore);
            updateScore('matchScore', 'matchProgress', analysis.jobMatchScore);

            // Display strengths
            const strengthsDiv = document.getElementById('strengths');
            strengthsDiv.innerHTML = '';
            analysis.strengths.forEach(strength => {
                const strengthElement = document.createElement('div');
                strengthElement.className = 'strength-item';
                strengthElement.innerHTML = `
                    <h4>‚úÖ ${strength.title}</h4>
                    <p>${strength.description}</p>
                `;
                strengthsDiv.appendChild(strengthElement);
            });

            // Display improvements
            const improvementsDiv = document.getElementById('improvements');
            improvementsDiv.innerHTML = '';
            analysis.improvements.forEach(improvement => {
                const improvementElement = document.createElement('div');
                improvementElement.className = 'improvement-item';
                improvementElement.innerHTML = `
                    <h4>üîß ${improvement.title} ${improvement.priority ? `(${improvement.priority} Priority)` : ''}</h4>
                    <p>${improvement.description}</p>
                    ${improvement.impact ? `<p style="color: #f27121; font-size: 0.9rem; margin-top: 5px;">üí° Impact: ${improvement.impact}</p>` : ''}
                `;
                improvementsDiv.appendChild(improvementElement);
            });

            // Display ATS analysis
            const atsDiv = document.getElementById('atsAnalysis');
            atsDiv.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <h4 style="color: #f27121; margin-bottom: 10px;">üìã ATS Evaluation</h4>
                    <p><strong>Formatting:</strong> ${analysis.atsAnalysis.formatting}</p>
                    <p><strong>Keywords:</strong> ${analysis.atsAnalysis.keywords}</p>
                    <p><strong>Sections:</strong> ${analysis.atsAnalysis.sections}</p>
                    <p><strong>Readability:</strong> ${analysis.atsAnalysis.readability}</p>
                </div>
                <div>
                    <h4 style="color: #f27121; margin-bottom: 10px;">üéØ ATS Recommendations</h4>
                    ${analysis.atsAnalysis.recommendations.map(rec => `<p>‚Ä¢ ${rec}</p>`).join('')}
                </div>
            `;

            // Display recommendations
            const recommendationsDiv = document.getElementById('recommendations');
            recommendationsDiv.innerHTML = '';
            analysis.recommendations.forEach(rec => {
                const recElement = document.createElement('div');
                recElement.style.marginBottom = '12px';
                recElement.innerHTML = `
                    <h4 style="color: #f27121; margin-bottom: 5px;">üìä ${rec.category}</h4>
                    <p>${rec.suggestion}</p>
                `;
                recommendationsDiv.appendChild(recElement);
            });

            // Show results
            document.getElementById('results').style.display = 'block';
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });

            showMessage('Analysis completed successfully!', 'success');
        }

        function updateScore(scoreId, progressId, value) {
            const scoreElement = document.getElementById(scoreId);
            const progressElement = document.getElementById(progressId);
            
            scoreElement.textContent = value;
            
            // Animate progress bar
            setTimeout(() => {
                progressElement.style.width = value + '%';
            }, 300);
        }

        // Display setup instructions
        window.addEventListener('load', function() {
            const backendCode = document.getElementById('backend-code').textContent;
            const packageJson = document.getElementById('package-json').textContent;
            const envTemplate = document.getElementById('env-template').textContent;
            
            console.log('=== AI Resume Reviewer Setup Instructions ===');
            console.log('1. Create a new directory for your project');
            console.log('2. Save the backend code as "server.js"');
            console.log('3. Save the package.json content');
            console.log('4. Create a .env file with your Gemini API key');
            console.log('5. Run: npm install');
            console.log('6. Run: npm start');
            console.log('7. Open this HTML file in your browser');
            console.log('===============================================');
        });
    </script>
</body>
</html>